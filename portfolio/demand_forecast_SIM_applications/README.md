# TL;DR
- SIM申込件数を月次で予測する需要予測プロジェクト
- ベースライン（前月・移動平均）と比較し、特徴量設計の有効性を検証
- 季節性・トレンドを加えた MODEL(PLUS) が最も安定して高精度
- 販促計画・人員配置の意思決定に活用可能な設計を意識

# プロジェクト概要
本プロジェクトは、SIM申込件数の需要を月次で予測し、
販促計画や人員配置の意思決定に活用することを目的とした
需要予測モデルの実装・検証プロジェクトです。

## 予測内容
- 来年度のSIM申込件数の需要予測
- 年間需要を月次単位で予測可能なモデルを構築

## 特徴量
### 基本特徴量（BASIC）
- 月次申込件数（applications）
- 過去1〜3ヶ月の申込件数（prev_1, prev_2, prev_3）
- 3ヶ月移動平均（ma3）

### 拡張特徴量（PLUS）
- 月番号（month）
- 時系列トレンド（trend）
- 季節性特徴量（month_sin, month_cos）

## 正解ラベル
- 各月のSIM申込件数（applications）
- 日次データを月次集計した実測値を使用

## 使用目的
今年度のSIM申込の目標件数設定の目安

## 業務での活用例

- 来月の申込件数を事前に予測し、
  人員配置・在庫・販促予算配分に活用可能
- 閑散期はキャンペーンを抑え、
  繁忙期に集中投資する判断材料として利用できる

## ディレクトリ構成
- data/
  - csv/              # 学習・評価用データ
- src/
  - config.py         # パス・モデル設定
  - load_data.py      # データ読み込み
  - make_sim_applications_csv.py # CSVデータの作成
  - features.py       # 特徴量生成
  - train_model.py    # 学習処理
  - predict.py        # 予測実行
  - evaluate_model.py # 評価
- analysis/
  - analysis_sim_applications.ipynb
- models/
  - artifacts/        # 学習済みモデル
- images/             # 可視化結果

### データ生成について
本プロジェクトでは、分析用の擬似データを  
`src/make_data_csv.py` にて生成しています。

生成されたCSVは `data/csv/` 配下に保存され、
学習・評価・予測処理ではこのCSVを入力として使用します。

## 設計方針（Config管理）
本プロジェクトでは、データパスやモデル保存先などの設定値を
`config.py` に集約しています。

これにより、
- train / predict / evaluate 間でのパス不整合防止
- ディレクトリ構成変更時の修正範囲最小化
- モデル名・バージョン管理の容易化

を実現しています。

## 分析結果
- 月次データをzスコアで標準化した結果、3月は平均から大きく正の乖離を示し、
  新生活・決算期による需要集中が確認できた。
- 5〜6月は負の乖離が見られ、新生活需要の反動による閑散期と考えられる。
- 月次合計では3月にピークがあるが、3ヶ月移動平均では4月以降に下落し、
  9月以降に回復トレンドが見られた。
- 本分析は、年間の販促予算配分および人員配置計画の検討に活用可能である。

## モデル評価
時系列データの特性を考慮し、
直近 N ヶ月をテストデータとする時系列分割で評価を行った。

比較対象として以下を用意した。
- ベースライン1：前月と同じ値を予測
- ベースライン2：3ヶ月移動平均
- MODEL(BASIC)：ラグ特徴量のみの線形回帰
- MODEL(PLUS)：ラグ + 季節性 + トレンド

その結果、test_months=6 において MODEL(PLUS) が最も安定して高精度となり、
前月ベースラインに対して MAE を約60%削減した。

### 評価結果サマリ（MAE）
| test_months | prev_1 | ma3 | BASIC | PLUS |
|------------|--------|-----|-------|------|
| 3          | 381    | 482 | 470   | 246  |
| 6          | 361    | 425 | 480   | 189  |
| 12         | 500    | 582 | 570   | 285  |

### ベースラインとの比較
- prev_1（前月踏襲）
- ma3（3ヶ月移動平均）
- 線形回帰モデル（BASIC / PLUS）

### 評価結果サマリ
（表 or 箇条書き）

### なぜ PLUS 特徴量が有効だったか
- 月周期（sin/cos）により季節性を明示的に表現できた
- trend により年単位の増加傾向を捉えられた
- 短期ラグ（prev）＋中期平均（ma3）の組み合わせが有効だった

## こだわりポイント
- 本プロジェクトでは、モデルの切り替えを
コード変更ではなく、model_name / version の指定で行える設計としています。

## 限界と今後の改善案
- データが疑似生成のため、実データでは再検証が必要
- 非線形モデル（XGBoost等）での改善余地あり
- 外部要因（キャンペーン、価格改定）は未考慮

## 実行手順
```bash
python -m src.make_sim_applications_csv
python -m src.train_model
python -m src.predict
python -m src.evaluate_model
```

## 結論
本プロジェクトでは、  
時系列需要予測において

- ベースライン設計
- 特徴量設計
- 評価指標に基づく比較
- 業務活用を想定した解釈

を一貫して実装・検証した。

単なるモデル精度の向上ではなく、
「業務上、どのモデルを採用すべきか」を
説明可能な形で示すことを目的としたポートフォリオである。